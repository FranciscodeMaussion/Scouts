{% extends 'base.html' %}

{% load staticfiles %}

{% block content %}
<div class="top-content">
  <div class="inner-bg">
    <div class="container">
      <div class="row" style="margin-top:80;">
        <div class="col-sm-6 col-sm-offset-3">
          <div class="form-box">
            <div class="form-top">
              <br>
              <br>
              <form action="{% url 'accounts:newVenta' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group">
                  <label class="sr-only" for="nombre">{{ form.name.label }}</label>
                  <input type="text" name="{{ form.name.name }}" placeholder="{{ form.name.label }}" class="form-last-name form-control" id="nombre">
                </div>
                <div class="row">
                  <div class="col-xs-3">
                    <div class="form-group">
                      <select class="selectpicker" data-style="btn my-btn-gray"  id="de" name="{{ form.seller.name }}" data-live-search="true" title="{{ form.seller.label }}" data-width="auto">
                        {% for id, name in form.seller.field.choices %}
                        {% if not forloop.first %}
                        <option value="{{id}}">{{name}}</option>
                        {% endif %}
                        {% endfor %}
                      </select>
                    </div>
                  </div>
                  <div class="col-xs-offset-3 col-xs-3">
                    <div class="form-group">
                      <select class="selectpicker" data-style="btn my-btn-gray"  id="de" name="{{ form.event.name }}" data-live-search="true" title="{{ form.event.label }}" data-width="auto">
                        {% for id, name in form.event.field.choices %}
                        {% if not forloop.first %}
                        <option value="{{id}}">{{name}}</option>
                        {% endif %}
                        {% endfor %}
                      </select>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="sr-only" for="amount">{{ form.amount.label }}</label>
                  <input type="text" name="{{ form.amount.name }}" placeholder="{{ form.amount.label }}" class="form-last-name form-control" id="amount">
                </div>
                <div class="form-group">
                  <label class="sr-only" for="quantity">{{ form.quantity.label }}</label>
                  <input type="text" name="{{ form.quantity.name }}" nkeypress='return event.charCode >= 48 && event.charCode <= 57' placeholder="{{ form.quantity.label }}" class="form-last-name form-control" id="quantity">
                </div>
                <button type="submit" class="btn my-btn-green" style="margin-left:350px;">Agregar</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="confirmacion" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Antes de continuar, verifique que todos los datos sean correctos.</h4>
      </div>
      <div class="modal-body">
        <h6 id="helper_name"></h6>
        <h6 id="helper_desc"></h6>
        <h6 id="helper_fecha"></h6>
        <h6 id="helper_de"></h6>
      </div>
      <div class="modal-footer">
        <form method="POST">
          <button class="btn my-btn-green btn-danger" id="btn-delete" type="button" data-dismiss="modal" >Cancelar</button>
          <button class="btn my-btn-green btn-primary" id="btn-save-mov" type="button">Aceptar</button>
        </form>
      </div><p>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div>
{% endblock %}

{% block scripts %}
<script>
$("#mov").submit(function(evento, submit) {
  if (!submit) evento.preventDefault();
  var e = $( "#mov" ).serializeArray();
  $("#helper_name").text(e[1].value);
  $("#helper_desc").text(e[2].value);
  $("#helper_fecha").text(e[3].value);
  $("#helper_de").text(e[4].value);
  $("#helper_a").text(e[5].value);
});
$('#btn-save-mov').click(function(){
  $('#mov').trigger('submit', [true]);
});
$(function () {
  $('#fecha_mov').datetimepicker({format: 'YYYY-MM-DD HH:mm'});
});
</script>
{% endblock %}
