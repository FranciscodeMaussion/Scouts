{% load staticfiles %}
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <!-- Bootstrap Core CSS -->
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="{% static 'css/agency.css' %}" rel="stylesheet">

  <link rel="stylesheet" href="{% static 'css/toastr.min.css' %}">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Kaushan+Script"rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="{% static 'css/bootstrap-datetimepicker.min.css' %}" />
  <link rel="stylesheet" href="{% static 'font-awesome/css/font-awesome.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/form-elements.css' %}">
  <link rel="stylesheet" href="{% static 'css/fileinput.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap-select.min.css' %}">
  {% block style %}
  {% endblock %}
  <title>
    {% block title %}
    {% endblock %}
  </title>

</head>

<body id="page-top" class="index">
  <!-- Navigation -->
  <nav class="navbar navbar-default navbar-fixed-top" style="background-color:#222">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand page-scroll" style="color:white" href="#page-top">Scouts de Argentina</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li class="hidden">
            <a href="#page-top"></a>
          </li>
          <li>
            <a class="page-scroll" href="{% url 'guest:inup' %}">Inicio</a>
          </li>
          {% if request.user.is_authenticated %}
          {% if request.user.myuser.rol == 'SUPERUSER' %}
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" style="background-color:#222; color:white;" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">USUARIOS<span class="caret"></span></a>
            <ul class="dropdown-menu" style="background-color:#222; color:white;">
              <li>
                <a class="page-scroll" onclick="register()" href="#">Registrar</a>
              </li>
              <li role="separator" class="divider"></li>
              <li>
                <a class="page-scroll" href="{% url 'administrator:admin_user_list' %}">Ver lista de usuarios </a>
              </li>
            </ul>
          </li>
          {% endif %}
          {% if request.user.myuser.rol == 'ACCOUNT' %}
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" style="background-color:#222; color:white;" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Crear<span class="caret"></span></a>
            <ul class="dropdown-menu" style="background-color:#222; color:white;">
              <li>
                <a class="page-scroll" onclick="confirmation()" href="#">Crear Evento</a>
              </li>
              <li>
                <a class="page-scroll" onclick="add_item()" href="#">Agregar Item</a>
              </li>
              <li role="separator" class="divider"></li>
              <li>
                <a class="page-scroll" onclick="crearVenta()" href="#">Crear Venta</a>
              </li>
              <li role="separator" class="divider"></li>
              <li>
                <a class="page-scroll" onclick="createTransaction()" href="#">Crear Transaccion</a>
              </li>
            </ul>
          </li>
          {% endif %}

          {% if request.user.myuser.rol == 'ABM' %}
          <li>
            <a class="page-scroll" onclick="addAfiliado()" href="#">Nuevo afiliado</a>
          </li>
          {% endif %}
          <li>
            <a class="page-scroll" href="{% url 'guest:logout' %}">Salir</a>
          </li>
          {% else %}
          <li>
            <a class="page-scroll" href="{% url 'guest:login' %}">Ingresar</a>
          </li>
          {% endif %}
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>

  {% block content %}
  {% endblock %}
  <div class="modal fade" id="modal" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content" id="modal-content">

      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</body>
<!-- jQuery -->
<script src="{% static 'js/jquery.js' %}"></script>

<!-- Bootstrap Core JavaScript -->
<script src="{% static 'js/bootstrap.min.js' %}"></script>

<!-- Plugin JavaScript -->
<script src="{% static 'js/jquery.easing.min.js' %}"></script>
<script src="{% static 'js/toastr.min.js' %}"></script>
<script src="{% static 'js/classie.js' %}"></script>
<script src="{% static 'js/cbpAnimatedHeader.js' %}"></script>

<!-- input file !-->
<script src="{% static 'js/canvas-to-blob.min.js' %}"></script>
<script src="{% static 'js/sortable.min.js' %}"></script>
<script src="{% static 'js/purify.min.js' %}"></script>
<script src="{% static 'js/fileinput.min.js' %}"></script>

<!-- Contact Form JavaScript -->
<script src="{% static 'js/jqBootstrapValidation.js' %}"></script>
<script src="{% static 'js/contact_me.js' %}"></script>

<!-- Custom Theme JavaScript -->
<script src="{% static 'js/agency.js' %}"></script>
<script src="{% static 'js/moment.min.js' %}"></script>
<script src="{% static 'js/bootstrap-datetimepicker.min.js' %}"></script>
<script src="{% static 'js/scripts.js' %}"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="{% static 'js/bootstrap-select.min.js' %}"></script>

<script type="text/javascript">
function send_server(url){
  $.ajax({
    type: "GET",
    url: url,
    success:function(result) {
      $("#modal-content").html(result);
    },
    error:function(result) {
      console.log(result);
    }
  });
}

function addAfiliado(){
  var url = "{% url 'inscription:addAfiliado' %}";
  send_server(url);
  $("#modal").modal('show');
}
function confirmation(){
  var url = "{% url 'accounts:newEvent' %}";
  send_server(url);
  $("#modal").modal('show');
}
function crearVenta(){
  var url = "{% url 'accounts:newVenta' %}";
  send_server(url);
  $("#modal").modal('show');
}

function createTransaction(){
  var url = "{% url 'accounts:createTransaction' %}" ;
  send_server(url);
  $("#modal").modal('show');
}


function add_item(){
  url = "{% url 'accounts:addItem' %}";
  send_server(url);
  $("#modal").modal('show');
}

function register(){
  url = "{% url 'administrator:register' %}";
  send_server(url);
  $("#modal").modal('show');
}

</script>
{% block scripts %}
{% endblock %}
</html>
